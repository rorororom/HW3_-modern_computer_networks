# HW3_-modern_computer_networks

## Архитектура

- **p2p_client.py** - единый клиент для всех сценариев
- **rendezvous_server.py** - сервер для установления P2P соединений
- **traf/HW3_3_pop.pcapng** - захваченный трафик (оба клиента за NAT)
- **traf/HW3_3_pop_clean2.pcapng** - отфильтрованный трафик

## Запуск

### Сервер:
```bash
    python3 rendezvous_server.py
```

### Клиент
```bash
    python3 p2p_client.py <client<id>> <server<ip>>
```

### Пример работы
```text
    > connect client2
    > send abiba aboba abubu
```

<img src="PNG/2025-11-01 16.31.58.jpg" width="500"/>

### Пояснения по фазам:
```txt
Фаза 1 — Регистрация (пакеты 1-3)
Клиенты подключаются к серверу, чтобы узнать адреса друг друга

Фаза 2 — Hole Punching (пакеты 8-11)
Клиенты начинают слать друг другу UDP-пакеты

NAT устройства "запоминают" маршрут для обратных пакетов

punch_ack — подтверждение, что соединение установлено

Фаза 3 — Первое сообщение (пакет 16)
PC3 отправляет первое тестовое сообщение "hello"

Фаза 4 — Keep-alive (пакеты 19-50)
Регулярный обмен punch пакетами каждые ~0.5 секунд

Фаза 5 — Рабочий обмен (пакеты 51-55)
После поддержания соединения клиенты обмениваются реальными сообщениями
```